<!--
 Copyright (c) 2014, 2018, Oracle and/or its affiliates.
 The Universal Permissive License (UPL), Version 1.0
-->

<div class="oj-hybrid-padding group-analytics-container" style="background-color: white;">
    <h1 align="center">Group Analytics</h1>
    <br>
    <div id="switcherdemo" style="min-height: 800px;">
        <oj-tab-bar id="hnavlist" 
                    edge="top"
                    role="tablist"
                    selection="{{selectedItem}}"
                    style="font-size: 22px;font-style: italic;">
            <ul>
                <li id="analytics1">
                    <a href="#" aria-controls="analytics1-tab-panel" id="analytics1-tab" data-bind="text:city4ageApproachLbl" >
                        
                    </a>
                </li>
                <li id="analytics2">
                    <a href="#" aria-controls="analytics2-tab-panel" id="analytics2-tab" data-bind="text:geriatricExplorationLbl">
                        
                    </a>
                </li>
            </ul>
        </oj-tab-bar>

        <oj-switcher value="[[selectedItem]]">
            <div slot="analytics1" 
                 id="analytics1-tab-panel"
                 role="tabpanel" 
                 aria-labelledby="analytics1-tab">
                <div class="demo-tab-content-group">
                    <br>
                        <br>
                    <div class="flex-container" >
                        <div class="oj-panel flex-item-1 oj-panel oj-panel-shadow-sm" style="flex-basis: 30%;min-width: 380px;">
                            <div class="tree-container" style="text-align: center; margin:0 auto;">
                                        <oj-label for="treeview1" >Geriatric Model Variables:</oj-label>
                                        <br>
                                        <oj-tree-view id="treeview1" 
                                                      data="[[treeViewData]]" 
                                                      item.renderer="[[oj.KnockoutTemplateUtils.getRenderer('item_template', true)]]" 
                                                      selection="{{treeSelection1}}" 
                                                      selection-mode="multiple" 
                                                      on-selection-changed="[[selectionChangedTree1]]" 
                                                      aria-label="Tree View Selection Demo"
                                                      style="text-align: left;"
                                                      >
                                        </oj-tree-view>
                                        <br>
                                        <div id="tree-legend" style="padding-top: 15px;">
                                                <oj-label for="tree-legend">Legend:</oj-label>

                                                <svg class="demo-treeview-icon" width="16px" height="16px" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">
                                                            <circle cx="8" cy="8" r="8" fill="#0376AC" />
                                                </svg>
                                                <span class="oj-treeview-item-text">Geriatric factor</span>

                                                <svg class="demo-treeview-icon" width="16px" height="16px" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">
                                                            <circle cx="8" cy="8" r="8" fill="#68a23f" />
                                                </svg>
                                                <span class="oj-treeview-item-text">Geriatric sub-factor</span>

                                                <svg class="demo-treeview-icon" width="16px" height="16px" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">
                                                            <circle cx="8" cy="8" r="8" fill="#ED6647" />
                                                </svg>
                                                <span class="oj-treeview-item-text">Measure</span>
                                            </div>
                            </div>
                                        
                                    
                                    
                                    <script type="text/html" id="item_template">
                                          <li>
                                            <svg class="demo-treeview-icon" width="16px" height="16px" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">
                                                    <!-- ko if: (type == "GEF") -->
                                                        <circle cx="8" cy="8" r="8" fill="#0376AC" />
                                                    <!-- /ko -->
                                                    <!-- ko if: (type == "GES") -->
                                                        <circle cx="8" cy="8" r="8" fill="#68a23f" />
                                                    <!-- /ko -->
                                                    <!-- ko if: (type == "MEA") -->
                                                        <circle cx="8" cy="8" r="8" fill="#ED6647" />
                                                    <!-- /ko -->
                                             </svg>
                                            <span class="oj-treeview-item-text" data-bind="text:title, attr: {title: pilots.join() }"></span>
                                             <!-- ko if: (allPilots == false) -->
                                            <img src="images/warn.png">
                                            <!-- /ko -->
                                            
                                          </li>
                                    </script>
                        </div>
                        
                        <div style=" flex-basis: 70%;" class=" ">
                            
                            <div class="input-container-1 oj-panel oj-panel-shadow-sm" style="text-align: center;">
                                    <oj-label for="pilots1">Pilots:</oj-label>
                                    <oj-conveyor-belt  class="conv-pilots" style="width:500px;margin:0 auto;">
                                        <oj-buttonset-many id="pilots1" class="oj-buttonset-width-auto" value="{{selectedPilots1}}">
                                            <!-- ko foreach: pilots -->
                                            <oj-option value='[[id]]'>
                                                <span data-bind="text: label"></span>
                                            </oj-option>
                                            <!-- /ko -->
                                        </oj-buttonset-many>
                                    </oj-conveyor-belt>
                                
                                
                                    <div class="oj-flex">
                                        <div class="oj-flex-item" style="text-align: right">
                                                <oj-label for="fromDate">From:</oj-label>
                                                <oj-input-date id="fromDate" value='{{dateFromValue}}' style="width:10em"></oj-input-date>
                                        </div>
                                        <div class="oj-flex-item" style="text-align: left;padding-left: 1em;">
                                                <oj-label for="toDate">To:</oj-label>
                                                <oj-input-date id="toDate" value='{{dateToValue}}' style="width:10em"></oj-input-date>
                                        </div>
                                </div>
                                    <br>
                                        <oj-button id='applyFilterBtn1' data-bind="click:applyScenario1">
                                        <span><oj-bind-text value="[[applyFilterLbl]]"></oj-bind-text></span>
                                    </oj-button>
                                        <div id="errorMessage1">You did not set all required filters, or the time period selected is not valid. Please try again.</div>
                                </div>
                                <br>
                                    <div id="logo-collapsible-container1" style="text-align: center;">
                                        <img id="logo-img-1" src="images/City4AgeLogo.png" style="display: inline;width:60%;">
                                        <div id="collapsible-container1" style="display: none">
                                        <oj-collapsible expanded='true'>
                                            <h3  slot="header">Diagram</h3>
                                            <div class='chart-container oj-panel oj-panel-shadow-sm' style="text-align: center;">
                                                <div id="chart-container-1" style="display: block;padding-top: 15px;min-height:500px">
                                                    <div id="ldr1" class="loader1"></div>
                                                    <oj-chart 
                                                        id="chart1"
                                                        type="line"
                                                        series="[[lineSeriesValue]]"
                                                        groups="[[lineGroupsValue]]"
                                                        animation-on-display="auto"
                                                        animation-on-data-change="auto"
                                                        hover-behavior="dim"
                                                        style="height:500px;width:100%;"
                                                        legend.position ="top"
                                                        zoom-and-scroll="live"
                                                        hide-and-show-behavior="withRescale"
                                                        >
                                                    </oj-chart>
                                                </div>
                                            </div>
                                          </oj-collapsible>
                                        <oj-collapsible>
                                            <h3  slot="header">Coorelation factors heatmap</h3>
                                            <div class="oj-panel oj-panel-shadow-sm">
                                                <div class="heatmap-container ">
                                                    <oj-label for="datagrid">Heatmap:</oj-label> 
                                                    <oj-data-grid id="heatmap1" data-bind="style:{height : heatmapHeight(),width:heatmapWidth()}" 
                                                        aria-label="Data Grid Heatmap Demo" 
                                                        style=" margin:0 auto;"
                                                        data="[[dataSource1]]"
                                                        header.row.style="width:250px;height:50px;"
                                                        header.column.resizable='{"width":"enable", "height":"enable"}'
                                                        header.column.class-name="demo-cell-alignment"
                                                        header.column.style="height:60px;width:50px;"
                                                        header.column.sortable="disable"
                                                        cell.renderer="[[cellRenderer]]"
                                                        cell.style='[[setCellStyle]]'>
                                                    </oj-data-grid>
                                                    <br>
                                                     <oj-label for="heatmap-legend-container">Legend:</oj-label>  
                                                     <div id="heatmap-legend-container">
                                                        <div class="heatmap-legend-numbers" data-bind="style:{width:heatmapWidth()}">
                                                            <div class="numbers">-0.8</div>
                                                            <div class="numbers">-0.4</div>
                                                            <div class="numbers">0</div>
                                                            <div class="numbers">0.4</div>
                                                            <div class="numbers">0.8</div>
                                                        </div>
                                                    <div class="heatmap-legend-gradient" data-bind="style:{width:heatmapWidth()}">
                                                        
                                                    </div>
                                                     </div>
                                                </div>
                                            </div>
                                        </oj-collapsible>
                                        </div>
                                    </div>
                        </div>
                    </div>
                </div>
            </div>
            <div slot="analytics2" 
                 id="analytics2-tab-panel"
                 role="tabpanel" 
                 aria-labelledby="analytics2-tab">
                <div class="demo-tab-content-group">
                         <br>
                             <br>
                    <div class="flex-container">
                        <div class="oj-panel oj-panel-shadow-sm flex-item-2" style="flex-basis: 30%;min-width: 380px;">
                                <div class="tree-container" style="text-align: center; margin:0 auto;">
                                        <oj-label for="treeview2">Geriatric Model Variables:</oj-label>
                                        <br>
                                        <oj-tree-view id="treeview2" 
                                                      data="[[treeViewData]]" 
                                                      item.renderer="[[oj.KnockoutTemplateUtils.getRenderer('item_template', true)]]" 
                                                      selection="{{treeSelection2}}" 
                                                      selection-mode="multiple" 
                                                      on-selection-changed="[[selectionChangedTree2]]" 
                                                      aria-label="Tree View Selection Demo"
                                                      style="text-align: left;"
                                                      >
                                        </oj-tree-view>
                                        <br>   
                                    <div id="tree-legend" style="padding-top: 15px;">
                                        <oj-label for="tree-legend">Legend:</oj-label>
                                        
                                        <svg class="demo-treeview-icon" width="16px" height="16px" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">
                                                    <circle cx="8" cy="8" r="8" fill="#0376AC" />
                                        </svg>
                                        <span class="oj-treeview-item-text">Geriatric factor</span>
                                        <svg class="demo-treeview-icon" width="16px" height="16px" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">
                                                    <circle cx="8" cy="8" r="8" fill="#68a23f" />
                                        </svg>
                                        <span class="oj-treeview-item-text">Geriatric sub-factor</span>
                                        <svg class="demo-treeview-icon" width="16px" height="16px" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">
                                                    <circle cx="8" cy="8" r="8" fill="#ED6647" />
                                        </svg>
                                        <span class="oj-treeview-item-text">Measure</span>
                                    </div>
                                        
                                    
                                    <script type="text/html" id="item_template">
                                          <li>
                                            <svg class="demo-treeview-icon" width="16px" height="16px" viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg">
                                                    <!-- ko if: (type == "GEF") -->
                                                        <circle cx="8" cy="8" r="8" fill="#0376AC" />
                                                    <!-- /ko -->
                                                    <!-- ko if: (type == "GES") -->
                                                        <circle cx="8" cy="8" r="8" fill="#68a23f" />
                                                    <!-- /ko -->
                                                    <!-- ko if: (type == "MEA") -->
                                                        <circle cx="8" cy="8" r="8" fill="#ED6647" />
                                                    <!-- /ko -->
                                             </svg>
                                            <span class="oj-treeview-item-text" data-bind="text:title, attr: {title: pilots.join() }"></span>
                                             <!-- ko if: (allPilots == false) -->
                                            <img src="images/warn.png">
                                            <!-- /ko -->
                                          </li>
                                    </script>
                            </div>
                        </div>
                        
                        <div style="flex-basis: 70%;">
                            <div class="input-container-2 oj-panel oj-panel-shadow-sm" style="text-align: center;">
                                    <oj-label for="pilots2">Pilots:</oj-label>
                                    <oj-conveyor-belt  class="conv-pilots" style="width:500px;margin:0 auto;">
                                        <oj-buttonset-many id="pilots2" class="oj-buttonset-width-auto" value="{{selectedPilots2}}">
                                            <!-- ko foreach: pilots -->
                                            <oj-option value='[[id]]'>
                                                <span data-bind="text: label"></span>
                                            </oj-option>
                                            <!-- /ko -->
                                        </oj-buttonset-many>
                                    </oj-conveyor-belt>
                                
                            
                                <oj-label for="soc">Sociodemografic Factors:</oj-label>
                                
                                    <oj-conveyor-belt class="conv-socio" id="soc" style="width:500px;margin:0 auto;">
                                        <oj-buttonset-many id="socioeconomicFactors" class="oj-buttonset-width-auto" value="{{selectedSocio}}">
                                            <!-- ko foreach: socioEconomic -->
                                            <oj-option value='[[id]]'>
                                                <span data-bind="text: label"></span>
                                            </oj-option>
                                            <!-- /ko -->
                                        </oj-buttonset-many>
                                    </oj-conveyor-belt>
                               
                                    <div class="oj-flex">
                                        <div class="oj-flex-item" style="text-align: right">
                                                <oj-label for="fromDate1">From:</oj-label>
                                                <oj-input-date id="fromDate1" value='{{dateFromValue1}}' style="width:10em"></oj-input-date>
                                        </div>
                                        <div class="oj-flex-item" style="text-align: left;padding-left: 1em;">
                                                <oj-label for="toDate1">To:</oj-label>
                                                <oj-input-date id="toDate1" value='{{dateToValue1}}' style="width:10em"></oj-input-date>
                                        </div>
                                    </div>
                                 <br>
                                    <oj-button id='applyFilterBtn2' data-bind="click:applyScenario2">
                                        <span><oj-bind-text value="[[applyFilterLbl]]"></oj-bind-text></span>
                                    </oj-button>
                                     <div id="errorMessage2">You did not set all required filters, or the time period selected is not valid. Please try again.</div>
                                    
                            </div>
                                    <br>
                                        <div id="logo-collapsible-container2" style="text-align: center;">
                                        <img id="logo-img-2" src="images/City4AgeLogo.png" style="display: inline;width:60%;">
                                        
                                        <div id="collapsible-container2" style="display: none">
                                        <oj-collapsible expanded='true'>
                                            <h3  slot="header">Diagram</h3>
                                            <div class="oj-panel oj-panel-shadow-sm" style="text-align: center;">
                                            
                                                <div id="chart-container-2" style="display: block;padding-top: 15px;min-height:500px">
                                                    <div class="oj-flex">
                                                        <div class="oj-flex-item" style="text-align: right;">
                                                            <oj-buttonset-many value="{{evolutionInTime2}}">
                                                                <oj-option value="disabled">Evolution in time</oj-option>
                                                            </oj-buttonset-many>
                                                        </div>
                                                        <div class="oj-flex-item" style="text-align: left; padding-left: 1em;">
                                                            <oj-buttonset-many value="{{comparisonAnalysis2}}" disabled=[[comparisonDisabled]] >
                                                                <oj-option value="disabled">Comparison Analysis</oj-option>
                                                            </oj-buttonset-many>
                                                        </div>

                                                    </div>
                                                    <div id="ldr2" class="loader2"></div>
                                                    <oj-chart id="chart2"
                                                        type="[[chartTypeValue]]"
                                                        series="[[seriesValue]]"
                                                        groups="[[groupsValue]]"                  
                                                        selection-mode="multiple"
                                                        style-defaults="[[styleDefaultValue]]"
                                                        legend.position="top"

                                                        stack="[[stackValue]]"
                                                        split-dual-y="[[splitDualYValue]]"
                                                        y-axis.title="[[yAxisTitleValue]]"
                                                        y2-axis.title="[[y2AxisTitleValue]]"
                                                        splitter-position="0.5"
                                                        y-axis.tick-label.rendered="off"
                                                        y2-axis.tick-label.rendered="off"
                                                        orientation="[[orientationValue]]"
                                                        
                                                        x-axis = "[[lineXAxis]]"
                                                        
                                                        zoom-and-scroll="live"
                                                        hide-and-show-behavior="withRescale"
                                                        orientation="vertical"
                                                        style="width:100%;max-width:1100px;height:500px;margin:0 auto;" >
                                                    </oj-chart>
                                                    <div class="export-container">
                                                             <oj-label for="selectExport">Select export format:</oj-label>
                                                            <oj-select-one id="selectExport" style="max-width:5em">
                                                                <oj-option value="xlsx">
                                                                    <span slot="startIcon">
                                                                        <img src="images/xlsxIcon.png" role="presentation" style="vertical-align:middle"/>
                                                                    </span> xlsx
                                                                </oj-option>
                                                                <oj-option value="csv">
                                                                    <span slot="startIcon">
                                                                        <img src="images/csvIcon.png" role="presentation" style="vertical-align:middle"/>
                                                                    </span> csv
                                                                </oj-option>
                                                            </oj-select-one>
                                                             <oj-button id="export-button" data-bind="click:exportBtn">Export</oj-button>
                                                    </div>
                                                    
                                                </div>
                                        </div>
                                          </oj-collapsible>
                                        <oj-collapsible>
                                            <h3  slot="header">Coorelation factors heatmap</h3>
                                            <div class="oj-panel oj-panel-shadow-sm">
                                                <div class="heatmap-container ">
                                                    <oj-label for="datagrid">Heatmap:</oj-label> 
                                                    <oj-data-grid id="heatmap2" data-bind="style:{height : heatmapHeight(),width:heatmapWidth()}" 
                                                        aria-label="Data Grid Heatmap Demo" 
                                                        style=" margin:0 auto;"
                                                        data="[[dataSource2]]"
                                                        header.row.style="width:250px;height:50px;"
                                                        header.column.resizable='{"width":"enable", "height":"enable"}'
                                                        header.column.class-name="demo-cell-alignment"
                                                        header.column.style="height:60px;width:50px;"
                                                        header.column.sortable="disable"
                                                        cell.renderer="[[cellRenderer]]"
                                                        cell.style='[[setCellStyle]]'>
                                                    </oj-data-grid>
                                                    <br>
                                                     <oj-label for="heatmap-legend-container">Legend:</oj-label>  
                                                     <div id="heatmap-legend-container">
                                                        <div class="heatmap-legend-numbers" data-bind="style:{width:heatmapWidth()}">
                                                            <div class="numbers">-0.8</div>
                                                            <div class="numbers">-0.4</div>
                                                            <div class="numbers">0</div>
                                                            <div class="numbers">0.4</div>
                                                            <div class="numbers">0.8</div>
                                                        </div>
                                                    <div class="heatmap-legend-gradient" data-bind="style:{width:heatmapWidth()}">
                                                        
                                                    </div>
                                                     </div>
                                                </div>
                                            </div>
                                        </oj-collapsible>
                                        </div>
                                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </oj-switcher>
    </div>
</div>
  